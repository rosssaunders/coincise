name: MEXC Docs Update

on:
  schedule:
    # Run weekly on Saturday night / Sunday morning at midnight UTC
    - cron: '0 0 * * 0'
  workflow_dispatch: # Allow manual triggering
  push:
    paths:
      - "venues/mexc/**"

jobs:
  update-docs:
    uses: ./.github/workflows/reusable-docs-update.yml
    with:
      venue_name: 'MEXC'
      docs_dir: 'docs/mexc/'
      install_command: 'cd venues/mexc && pnpm install --frozen-lockfile'
      puppeteer_command: 'cd venues/mexc && pnpm exec puppeteer browsers install chrome'
      extract_command: 'cd venues/mexc && pnpm run extract:all'
      pr_branch: 'docs/mexc-update'
      pr_body_template: |
        ## Changes
        - Updated API documentation from https://mexcdevelop.github.io/apidocs/spot_v3_en
        - Extracted general documentation (authentication, network connectivity, rate limits, etc.)
        - Extracted endpoint documentation (60 endpoints: 9 public, 51 private)
    secrets:
      OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
      PAT_GITHUB: ${{ secrets.PAT_GITHUB }}
