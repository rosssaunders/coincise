## /private/get_order_history_by_instrument

Retrieves history of orders that have been partially or fully filled.

**Scope:** `trade:read`

This is a private method; it can only be used after authentication.

### Parameters

| Parameter         | Required | Type    | Enum | Description                                                                                                                                 |
| ----------------- | -------- | ------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| instrument_name   | true     | string  |      | Instrument name                                                                                                                             |
| count             | false    | integer |      | Number of requested items, default - `20`, maximum - `1000`                                                                                 |
| offset            | false    | integer |      | The offset for pagination, default - `0`                                                                                                    |
| include_old       | false    | boolean |      | Include in result orders older than 2 days, default - `false`                                                                               |
| include_unfilled  | false    | boolean |      | Include in result fully unfilled closed orders, default - `false`                                                                           |
| with_continuation | false    | boolean |      | When set to true, the API response format changes from a simple list of orders to an object containing the orders and a continuation token. |
| continuation      | false    | string  |      | Continuation token for pagination                                                                                                           |
| historical        | false    | boolean |      |

Determines whether historical trade and order records should be retrieved.

- `false` (default): Returns recent records: orders for 30 min, trades for 24h.
- `true`: Fetches historical records, available after a short delay due to
  indexing. Recent data is not included.

**ðŸ“– Related Support Article:**
[Accessing historical trades and orders using API](https://support.deribit.com/hc/en-us/articles/25973087226909-Accessing-historical-trades-and-orders-using-API)
|

### Response

| Name                         | Type              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ---------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| id                           | integer           | The id that was sent in the request                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| jsonrpc                      | string            | The JSON-RPC version (2.0)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| result                       | array of _object_ |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Â Â â€ºÂ Â quote                   | boolean           | If order is a quote. Present only if true.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Â Â â€ºÂ Â triggered               | boolean           | Whether the trigger order has been triggered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Â Â â€ºÂ Â mobile                  | boolean           | optional field with value `true` added only when created with Mobile Application                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Â Â â€ºÂ Â app_name                | string            | The name of the application that placed the order on behalf of the user (optional).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Â Â â€ºÂ Â implv                   | number            | Implied volatility in percent. (Only if `advanced="implv"`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Â Â â€ºÂ Â refresh_amount          | number            | The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Â Â â€ºÂ Â usd                     | number            | Option price in USD (Only if `advanced="usd"`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Â Â â€ºÂ Â oto_order_ids           | array of string   | The Ids of the orders that will be triggered if the order is filled                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Â Â â€ºÂ Â api                     | boolean           | `true` if created with API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Â Â â€ºÂ Â average_price           | number            | Average fill price of the order                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Â Â â€ºÂ Â advanced                | string            | advanced type: `"usd"` or `"implv"` (Only for options; field is omitted if not applicable).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                              |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Â Â â€ºÂ Â order_id                | string            | Unique order identifier                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Â Â â€ºÂ Â post_only               | boolean           | `true` for post-only orders only                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Â Â â€ºÂ Â filled_amount           | number            | Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Â Â â€ºÂ Â trigger                 | string            | Trigger type (only for trigger orders). Allowed values: `"index_price"`, `"mark_price"`, `"last_price"`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Â Â â€ºÂ Â trigger_order_id        | string            | Id of the trigger order that created the order (Only for orders that were created by triggered orders).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Â Â â€ºÂ Â direction               | string            | Direction: `buy`, or `sell`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Â Â â€ºÂ Â contracts               | number            | It represents the order size in contract units. (Optional, may be absent in historical data).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Â Â â€ºÂ Â is_secondary_oto        | boolean           | `true` if the order is an order that can be triggered by another order, otherwise not present.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Â Â â€ºÂ Â replaced                | boolean           | `true` if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise `false`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Â Â â€ºÂ Â mmp_group               | string            | Name of the MMP group supplied in the `private/mass_quote` request. Only present for quote orders.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Â Â â€ºÂ Â mmp                     | boolean           | `true` if the order is a MMP order, otherwise `false`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Â Â â€ºÂ Â last_update_timestamp   | integer           | The timestamp (milliseconds since the Unix epoch)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Â Â â€ºÂ Â creation_timestamp      | integer           | The timestamp (milliseconds since the Unix epoch)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Â Â â€ºÂ Â cancel_reason           | string            | Enumerated reason behind cancel `"user_request"`, `"autoliquidation"`, `"cancel_on_disconnect"`, `"risk_mitigation"`, `"pme_risk_reduction"` (portfolio margining risk reduction), `"pme_account_locked"` (portfolio margining account locked per currency), `"position_locked"`, `"mmp_trigger"` (market maker protection), `"mmp_config_curtailment"` (market maker configured quantity decreased), `"edit_post_only_reject"` (cancelled on edit because of `reject_post_only` setting), `"oco_other_closed"` (the oco order linked to this order was closed), `"oto_primary_closed"` (the oto primary order that was going to trigger this order was cancelled), `"settlement"` (closed because of a settlement) |
| Â Â â€ºÂ Â mmp_cancelled           | boolean           | `true` if order was cancelled by mmp trigger (optional)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Â Â â€ºÂ Â quote_id                | string            | The same QuoteID as supplied in the `private/mass_quote` request. Only present for quote orders.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Â Â â€ºÂ Â order_state             | string            | Order state: `"open"`, `"filled"`, `"rejected"`, `"cancelled"`, `"untriggered"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Â Â â€ºÂ Â is_rebalance            | boolean           | Optional (only for spot). `true` if order was automatically created during cross-collateral balance restoration                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Â Â â€ºÂ Â reject_post_only        | boolean           | `true` if order has `reject_post_only` flag (field is present only when `post_only` is `true`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Â Â â€ºÂ Â label                   | string            | User defined label (up to 64 characters)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Â Â â€ºÂ Â is_liquidation          | boolean           | Optional (not added for spot). `true` if order was automatically created during liquidation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Â Â â€ºÂ Â price                   | number or string  | Price in base currency or "market_price" in case of open trigger market orders                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Â Â â€ºÂ Â web                     | boolean           | `true` if created via Deribit frontend (optional)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Â Â â€ºÂ Â time_in_force           | string            | Order time in force: `"good_til_cancelled"`, `"good_til_day"`, `"fill_or_kill"` or `"immediate_or_cancel"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Â Â â€ºÂ Â trigger_reference_price | number            | The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Â Â â€ºÂ Â display_amount          | number            | The actual display amount of iceberg order. Absent for other types of orders.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Â Â â€ºÂ Â order_type              | string            | Order type: `"limit"`, `"market"`, `"stop_limit"`, `"stop_market"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Â Â â€ºÂ Â is_primary_otoco        | boolean           | `true` if the order is an order that can trigger an OCO pair, otherwise not present.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Â Â â€ºÂ Â original_order_type     | string            | Original order type. Optional field                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Â Â â€ºÂ Â block_trade             | boolean           | `true` if order made from block_trade trade, added only in that case.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Â Â â€ºÂ Â trigger_price           | number            | Trigger price (Only for future trigger orders)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Â Â â€ºÂ Â oco_ref                 | string            | Unique reference that identifies a one_cancels_others (OCO) pair.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Â Â â€ºÂ Â trigger_offset          | number            | The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Â Â â€ºÂ Â quote_set_id            | string            | Identifier of the QuoteSet supplied in the `private/mass_quote` request. Only present for quote orders.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Â Â â€ºÂ Â auto_replaced           | boolean           | Options, advanced orders only - `true` if last modification of the order was performed by the pricing engine, otherwise `false`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Â Â â€ºÂ Â reduce_only             | boolean           | Optional (not added for spot). '`true` for reduce-only orders only'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Â Â â€ºÂ Â amount                  | number            | It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Â Â â€ºÂ Â risk_reducing           | boolean           | `true` if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise `false`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Â Â â€ºÂ Â instrument_name         | string            | Unique instrument identifier                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Â Â â€ºÂ Â trigger_fill_condition  | string            |

The fill condition of the linked order (Only for linked order types), default:
`first_hit`.

- `"first_hit"` - any execution of the primary order will fully cancel/place all
  secondary orders.
- `"complete_fill"` - a complete execution (meaning the primary order no longer
  exists) will cancel/place the secondary orders.
- `"incremental"` - any fill of the primary order will cause proportional
  partial cancellation/placement of the secondary order. The amount that will be
  subtracted/added to the secondary order will be rounded down to the contract
  size.

| | Â Â â€ºÂ Â primary_order_id | string | Unique order identifier |
