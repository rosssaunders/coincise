## Cancel an Existing Order and Send a New Order (TRADE)​

```
POST /api/v3/order/cancelReplace
```

Cancels an existing order and places a new order on the same symbol.

Filters and Order Count are evaluated before the processing of the cancellation
and order placement occurs.

A new order that was not attempted (i.e. when `newOrderResult: NOT_ATTEMPTED`),
will still increase the unfilled order count by 1.

**Weight:** 1

**Unfilled Order Count:** 1

**Parameters:**

| Name              | Type   | Mandatory | Description             |
| ----------------- | ------ | --------- | ----------------------- |
| symbol            | STRING | YES       |                         |
| side              | ENUM   | YES       |                         |
| type              | ENUM   | YES       |                         |
| cancelReplaceMode | ENUM   | YES       | The allowed values are: |

`STOP_ON_FAILURE` - If the cancel request fails, the new order placement will
not be attempted.  
`ALLOW_FAILURE` - new order placement will be attempted even if cancel request
fails. | | timeInForce | ENUM | NO | | | quantity | DECIMAL | NO | | |
quoteOrderQty | DECIMAL | NO | | | price | DECIMAL | NO | | |
cancelNewClientOrderId | STRING | NO | Used to uniquely identify this cancel.
Automatically generated by default. | | cancelOrigClientOrderId | STRING | NO |
Either `cancelOrderId` or `cancelOrigClientOrderId` must be sent.

If both `cancelOrderId` and `cancelOrigClientOrderId` parameters are provided,
the `cancelOrderId` is searched first, then the `cancelOrigClientOrderId` from
that result is checked against that order.

If both conditions are not met the request will be rejected. | | cancelOrderId |
LONG | NO | Either `cancelOrderId` or `cancelOrigClientOrderId` must be sent.

If both `cancelOrderId` and `cancelOrigClientOrderId` parameters are provided,
the `cancelOrderId` is searched first, then the `cancelOrigClientOrderId` from
that result is checked against that order.

If both conditions are not met the request will be rejected. | |
newClientOrderId | STRING | NO | Used to identify the new order. | | strategyId
| LONG | NO | | | strategyType | INT | NO | The value cannot be less than
`1000000`. | | stopPrice | DECIMAL | NO | | | trailingDelta | LONG | NO | See
[Trailing Stop order FAQ](/docs/binance-spot-api-docs/faqs/trailing-stop-faq) |
| icebergQty | DECIMAL | NO | | | newOrderRespType | ENUM | NO | Allowed
values:  
`ACK`, `RESULT`, `FULL`  
`MARKET` and `LIMIT` orders types default to `FULL`; all other orders default to
`ACK` | | selfTradePreventionMode | ENUM | NO | The allowed enums is dependent
on what is configured on the symbol. The possible supported values are:
[STP Modes](/docs/binance-spot-api-docs/enums#stpmodes). | | cancelRestrictions
| ENUM | NO | Supported values:  
`ONLY_NEW` - Cancel will succeed if the order status is `NEW`.  
`ONLY_PARTIALLY_FILLED` \- Cancel will succeed if order status is
`PARTIALLY_FILLED`. For more information please refer to
[Regarding `cancelRestrictions`](/docs/binance-spot-api-docs/rest-api/trading-endpoints#regarding-cancelrestrictions)
| | orderRateLimitExceededMode | ENUM | No | Supported values:  
`DO_NOTHING` (default)- will only attempt to cancel the order if account has not
exceeded the unfilled order rate limit  
`CANCEL_ONLY` - will always cancel the order | | pegPriceType | ENUM | NO |
`PRIMARY_PEG` or `MARKET_PEG`  
See [Pegged Orders](/docs/binance-spot-api-docs/rest-api/trading-endpoints#pegged-orders-info)
| | pegOffsetValue | INT | NO | Price level to peg the price to (max: 100)  
See [Pegged Orders](/docs/binance-spot-api-docs/rest-api/trading-endpoints#pegged-orders-info)
| | pegOffsetType | ENUM | NO | Only `PRICE_LEVEL` is supported  
See [Pegged Orders](/docs/binance-spot-api-docs/rest-api/trading-endpoints#pegged-orders-info)
| | recvWindow | DECIMAL | NO | The value cannot be greater than `60000`.  
Supports up to three decimal places of precision (e.g., 6000.346) so that
microseconds may be specified. | | timestamp | LONG | YES | |

Similar to `POST /api/v3/order`, additional mandatory parameters are determined
by `type`.

Response format varies depending on whether the processing of the message
succeeded, partially succeeded, or failed.

**Data Source:** Matching Engine

| Request             | Response                     |
| ------------------- | ---------------------------- | -------------------- | -------------- | ---------------- | -------- |
| `cancelReplaceMode` | `orderRateLimitExceededMode` | Unfilled Order Count | `cancelResult` | `newOrderResult` | `status` |
| ---                 | ---                          | ---                  | ---            | ---              | ---      |
| `STOP_ON_FAILURE`   | `DO_NOTHING`                 | Within Limits        | ✅ `SUCCESS`   | ✅ `SUCCESS`     | `200`    |
| ❌ `FAILURE`        | ➖ `NOT_ATTEMPTED`           | `400`                |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | `409`                |
| Exceeds Limits      | ✅ `SUCCESS`                 | ✅ `SUCCESS`         | N/A            |
| ❌ `FAILURE`        | ➖ `NOT_ATTEMPTED`           | N/A                  |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | N/A                  |
| `CANCEL_ONLY`       | Within Limits                | ✅ `SUCCESS`         | ✅ `SUCCESS`   | `200`            |
| ❌ `FAILURE`        | ➖ `NOT_ATTEMPTED`           | `400`                |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | `409`                |
| Exceeds Limits      | ❌ `FAILURE`                 | ➖ `NOT_ATTEMPTED`   | `429`          |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | `429`                |
| `ALLOW_FAILURE`     | `DO_NOTHING`                 | Within Limits        | ✅ `SUCCESS`   | ✅ `SUCCESS`     | `200`    |
| ❌ `FAILURE`        | ❌ `FAILURE`                 | `400`                |
| ❌ `FAILURE`        | ✅ `SUCCESS`                 | `409`                |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | `409`                |
| Exceeds Limits      | ✅ `SUCCESS`                 | ✅ `SUCCESS`         | N/A            |
| ❌ `FAILURE`        | ❌ `FAILURE`                 | N/A                  |
| ❌ `FAILURE`        | ✅ `SUCCESS`                 | N/A                  |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | N/A                  |
| `CANCEL_ONLY`       | Within Limits                | ✅ `SUCCESS`         | ✅ `SUCCESS`   | `200`            |
| ❌ `FAILURE`        | ❌ `FAILURE`                 | `400`                |
| ❌ `FAILURE`        | ✅ `SUCCESS`                 | `409`                |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | `409`                |
| Exceeds Limits      | ✅ `SUCCESS`                 | ✅ `SUCCESS`         | `N/A`          |
| ❌ `FAILURE`        | ❌ `FAILURE`                 | `400`                |
| ❌ `FAILURE`        | ✅ `SUCCESS`                 | N/A                  |
| ✅ `SUCCESS`        | ❌ `FAILURE`                 | `409`                |

**Response SUCCESS and account has not exceeded the unfilled order count:**

```
// Both the cancel order placement and new order placement succeeded.{  "cancelResult": "SUCCESS",  "newOrderResult": "SUCCESS",  "cancelResponse": {    "symbol": "BTCUSDT",    "origClientOrderId": "DnLo3vTAQcjha43lAZhZ0y",    "orderId": 9,    "orderListId": -1,    "clientOrderId": "osxN3JXAtJvKvCqGeMWMVR",    "transactTime": 1684804350068,    "price": "0.01000000",    "origQty": "0.000100",    "executedQty": "0.00000000",    "origQuoteOrderQty": "0.000000",    "cummulativeQuoteQty": "0.00000000",    "status": "CANCELED",    "timeInForce": "GTC",    "type": "LIMIT",    "side": "SELL",    "selfTradePreventionMode": "NONE"  },  "newOrderResponse": {    "symbol": "BTCUSDT",    "orderId": 10,    "orderListId": -1,    "clientOrderId": "wOceeeOzNORyLiQfw7jd8S",    "transactTime": 1652928801803,    "price": "0.02000000",    "origQty": "0.040000",    "executedQty": "0.00000000",    "origQuoteOrderQty": "0.000000",    "cummulativeQuoteQty": "0.00000000",    "status": "NEW",    "timeInForce": "GTC",    "type": "LIMIT",    "side": "BUY",    "workingTime": 1669277163808,    "fills": [],    "selfTradePreventionMode": "NONE"  }}
```

**Response when Cancel Order Fails with STOP_ON FAILURE and account has not
exceeded their unfilled order count:**

```
{  "code": -2022,  "msg": "Order cancel-replace failed.",  "data": {    "cancelResult": "FAILURE",    "newOrderResult": "NOT_ATTEMPTED",    "cancelResponse": {      "code": -2011,      "msg": "Unknown order sent."    },    "newOrderResponse": null  }}
```

**Response when Cancel Order Succeeds but New Order Placement Fails and account
has not exceeded their unfilled order count:**

```
{  "code": -2021,  "msg": "Order cancel-replace partially failed.",  "data": {    "cancelResult": "SUCCESS",    "newOrderResult": "FAILURE",    "cancelResponse": {      "symbol": "BTCUSDT",      "origClientOrderId": "86M8erehfExV8z2RC8Zo8k",      "orderId": 3,      "orderListId": -1,      "clientOrderId": "G1kLo6aDv2KGNTFcjfTSFq",      "transactTime": 1684804350068,      "price": "0.006123",      "origQty": "10000.000000",      "executedQty": "0.000000",      "origQuoteOrderQty": "0.000000",      "cummulativeQuoteQty": "0.000000",      "status": "CANCELED",      "timeInForce": "GTC",      "type": "LIMIT_MAKER",      "side": "SELL",      "selfTradePreventionMode": "NONE"    },    "newOrderResponse": {      "code": -2010,      "msg": "Order would immediately match and take."    }  }}
```

**Response when Cancel Order fails with ALLOW_FAILURE and account has not
exceeded their unfilled order count:**

```
{  "code": -2021,  "msg": "Order cancel-replace partially failed.",  "data": {    "cancelResult": "FAILURE",    "newOrderResult": "SUCCESS",    "cancelResponse": {      "code": -2011,      "msg": "Unknown order sent."    },    "newOrderResponse": {      "symbol": "BTCUSDT",      "orderId": 11,      "orderListId": -1,      "clientOrderId": "pfojJMg6IMNDKuJqDxvoxN",      "transactTime": 1648540168818    }  }}
```

**Response when both Cancel Order and New Order Placement fail using
`cancelReplaceMode=ALLOW_FAILURE` and account has not exceeded their unfilled
order count:**

```
{  "code": -2022,  "msg": "Order cancel-replace failed.",  "data": {    "cancelResult": "FAILURE",    "newOrderResult": "FAILURE",    "cancelResponse": {      "code": -2011,      "msg": "Unknown order sent."    },    "newOrderResponse": {      "code": -2010,      "msg": "Order would immediately match and take."    }  }}
```

**Response when using `orderRateLimitExceededMode=DO_NOTHING` and account's
unfilled order count has been exceeded:**

```
{  "code": -1015,  "msg": "Too many new orders; current limit is 1 orders per 10 SECOND."}
```

**Response when using `orderRateLimitExceededMode=CANCEL_ONLY` and account's
unfilled order count has been exceeded:**

```
{  "code": -2021,  "msg": "Order cancel-replace partially failed.",  "data": {    "cancelResult": "SUCCESS",    "newOrderResult": "FAILURE",    "cancelResponse": {      "symbol": "LTCBNB",      "origClientOrderId": "GKt5zzfOxRDSQLveDYCTkc",      "orderId": 64,      "orderListId": -1,      "clientOrderId": "loehOJF3FjoreUBDmv739R",      "transactTime": 1715779007228,      "price": "1.00",      "origQty": "10.00000000",      "executedQty": "0.00000000",      "origQuoteOrderQty": "0.000000",      "cummulativeQuoteQty": "0.00",      "status": "CANCELED",      "timeInForce": "GTC",      "type": "LIMIT",      "side": "SELL",      "selfTradePreventionMode": "NONE"    },    "newOrderResponse": {      "code": -1015,      "msg": "Too many new orders; current limit is 1 orders per 10 SECOND."    }  }}
```

**Notes:**

- The payload above does not show all fields that can appear. Please refer to
  [Conditional fields in Order Responses](/docs/binance-spot-api-docs/rest-api/trading-endpoints#conditional-fields-in-order-responses).
- The performance for canceling an order (single cancel or as part of a
  cancel-replace) is always better when only `orderId` is sent. Sending
  `origClientOrderId` or both `orderId` + `origClientOrderId` will be slower.

> Source:
> [https://developers.binance.com/docs/binance-spot-api-docs/rest-api/trading-endpoints](https://developers.binance.com/docs/binance-spot-api-docs/rest-api/trading-endpoints)
